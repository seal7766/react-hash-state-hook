{"version":3,"file":"react-hash-state-hook.cjs.development.js","sources":["../src/utils/getHashParams.ts","../src/useHashState.ts"],"sourcesContent":["const getHashParams = <State>(keys: (keyof State)[]): Partial<State> => {\n  const hashParams = new URLSearchParams(window.location.hash.slice(1));\n  return keys.reduce((prev, cur) => {\n    const strKey = String(cur);\n    const value = hashParams.get(strKey);\n    return { ...prev, [strKey]: value ?? void 0 };\n  }, {});\n};\n\nexport default getHashParams;\n","import { useCallback, useEffect, useState } from 'react';\nimport getHashParams from './utils/getHashParams';\n\ntype useHashStateProps<State> = {\n  keys: (keyof State)[];\n};\n\nconst useHashState = <State extends Record<string, any> = {}>({\n  keys,\n}: useHashStateProps<State>) => {\n  const [state, setHookState] = useState<Partial<State>>(getHashParams(keys));\n\n  const onChangeHash = useCallback(() => {\n    const hashParams = new URLSearchParams(window.location.hash.slice(1));\n    const newState = keys\n      .map(key => {\n        const strKey = String(key);\n        const value = hashParams.get(strKey);\n        return { [strKey]: value };\n      })\n      .reduce((prev, cur) => {\n        return {\n          ...prev,\n          ...cur,\n        };\n      }, {});\n\n    setHookState(prevState => {\n      return { ...prevState, ...newState };\n    });\n  }, [keys]);\n\n  useEffect(() => {\n    window.addEventListener('hashchange', onChangeHash);\n    return window.removeEventListener('hashchange', onChangeHash);\n  }, [onChangeHash]);\n\n  const setState = (newState: Partial<State>) => {\n    const updateState = { ...state, ...newState };\n    setHookState(updateState);\n\n    const url = new URL(window.location.href);\n    url.hash = Object.entries(updateState)\n      .map(([key, value]) => {\n        return `${key}=${value}`;\n      })\n      .join('&');\n    window.history.pushState(null, '', url.toString());\n  };\n\n  return [state, setState] as const;\n};\n\nexport default useHashState;\n"],"names":["getHashParams","keys","hashParams","URLSearchParams","window","location","hash","slice","reduce","prev","cur","strKey","String","value","get","_extends","_extends2","useHashState","_ref","_useState","useState","state","setHookState","onChangeHash","useCallback","newState","map","key","_ref2","prevState","useEffect","addEventListener","removeEventListener","setState","updateState","url","URL","href","Object","entries","_ref3","join","history","pushState","toString"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,IAAMA,aAAa,GAAG,SAAhBA,aAAaA,CAAWC,IAAqB;EACjD,IAAMC,UAAU,GAAG,IAAIC,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;EACrE,OAAON,IAAI,CAACO,MAAM,CAAC,UAACC,IAAI,EAAEC,GAAG;;IAC3B,IAAMC,MAAM,GAAGC,MAAM,CAACF,GAAG,CAAC;IAC1B,IAAMG,KAAK,GAAGX,UAAU,CAACY,GAAG,CAACH,MAAM,CAAC;IACpC,OAAAI,QAAA,KAAYN,IAAI,GAAAO,SAAA,OAAAA,SAAA,CAAGL,MAAM,IAAGE,KAAK,WAALA,KAAK,GAAI,KAAK,CAAC,EAAAG,SAAA;GAC5C,EAAE,EAAE,CAAC;AACR,CAAC;;ACAD,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAAC,IAAA;MAChBjB,IAAI,GAAAiB,IAAA,CAAJjB,IAAI;EAEJ,IAAAkB,SAAA,GAA8BC,cAAQ,CAAiBpB,aAAa,CAACC,IAAI,CAAC,CAAC;IAApEoB,KAAK,GAAAF,SAAA;IAAEG,YAAY,GAAAH,SAAA;EAE1B,IAAMI,YAAY,GAAGC,iBAAW,CAAC;IAC/B,IAAMtB,UAAU,GAAG,IAAIC,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;IACrE,IAAMkB,QAAQ,GAAGxB,IAAI,CAClByB,GAAG,CAAC,UAAAC,GAAG;;MACN,IAAMhB,MAAM,GAAGC,MAAM,CAACe,GAAG,CAAC;MAC1B,IAAMd,KAAK,GAAGX,UAAU,CAACY,GAAG,CAACH,MAAM,CAAC;MACpC,OAAAiB,KAAA,OAAAA,KAAA,CAAUjB,MAAM,IAAGE,KAAK,EAAAe,KAAA;KACzB,CAAC,CACDpB,MAAM,CAAC,UAACC,IAAI,EAAEC,GAAG;MAChB,OAAAK,QAAA,KACKN,IAAI,EACJC,GAAG;KAET,EAAE,EAAE,CAAC;IAERY,YAAY,CAAC,UAAAO,SAAS;MACpB,OAAAd,QAAA,KAAYc,SAAS,EAAKJ,QAAQ;KACnC,CAAC;GACH,EAAE,CAACxB,IAAI,CAAC,CAAC;EAEV6B,eAAS,CAAC;IACR1B,MAAM,CAAC2B,gBAAgB,CAAC,YAAY,EAAER,YAAY,CAAC;IACnD,OAAOnB,MAAM,CAAC4B,mBAAmB,CAAC,YAAY,EAAET,YAAY,CAAC;GAC9D,EAAE,CAACA,YAAY,CAAC,CAAC;EAElB,IAAMU,QAAQ,GAAG,SAAXA,QAAQA,CAAIR,QAAwB;IACxC,IAAMS,WAAW,GAAAnB,QAAA,KAAQM,KAAK,EAAKI,QAAQ,CAAE;IAC7CH,YAAY,CAACY,WAAW,CAAC;IAEzB,IAAMC,GAAG,GAAG,IAAIC,GAAG,CAAChC,MAAM,CAACC,QAAQ,CAACgC,IAAI,CAAC;IACzCF,GAAG,CAAC7B,IAAI,GAAGgC,MAAM,CAACC,OAAO,CAACL,WAAW,CAAC,CACnCR,GAAG,CAAC,UAAAc,KAAA;UAAEb,GAAG,GAAAa,KAAA;QAAE3B,KAAK,GAAA2B,KAAA;MACf,OAAUb,GAAG,SAAId,KAAK;KACvB,CAAC,CACD4B,IAAI,CAAC,GAAG,CAAC;IACZrC,MAAM,CAACsC,OAAO,CAACC,SAAS,CAAC,IAAI,EAAE,EAAE,EAAER,GAAG,CAACS,QAAQ,EAAE,CAAC;GACnD;EAED,OAAO,CAACvB,KAAK,EAAEY,QAAQ,CAAU;AACnC,CAAC;;;;"}